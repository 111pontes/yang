



NETMOD WG                                                   Clyde Wildes
Internet-Draft                                             Cisco Systems
Intended status: Informational                     Agrahara Kiran Koushik
Expires: December 14, 2014                 Brocade Communications System
                                                           June 12, 2014


                             SYSLOG YANG model
                  draft-wildes-netmod-syslog-model-00

Abstract

   This document describes a data model for Syslog
   protocol which is used to convey event notification messages.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 14, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Wildes, et al.      Expires December 14, 2014               [Page 1]

Internet-Draft               SYSLOG YANG model             June 2014


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Definitions and Acronyms  . . . . . . . . . . . . . . . .   3
   2.  Problem Statement . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Design of the SYSLOG Model . .  . . . . . . . . . . . . . . .   3
     3.1.  SYSLOG Module . . . . . . . . . . . . . . . . . . . . . .   4
   4.  SYSLOG YANG Models  . . . . . . . . . . . . . . . . . . . . .   5
     4.1.  SYSLOG module . . . . . . . . . . . . . . . . . . . . . .   5
     4.2.  A SYSLOG Example  . . . . . . . . . . . . . . . . . . . .   9
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  10
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  11
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  11
   8.  Change log [RFC Editor: Please remove]  . . . . . . . . . . .  11
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  11
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  12

1.  Introduction

   In its most simplistic terms, the syslog protocol provides a
   transport to allow a machine to send event notification messages
   across IP networks to event message collectors - also known as syslog
   servers.

   Since each process, application and operating system was
   written somewhat independently, there is little uniformity to the
   content of syslog messages.  For this reason, no assumption is made
   upon the formatting or contents of the messages.  The protocol is
   simply designed to transport these event messages.  In all cases,
   there is one device that originates the message.  The syslog process
   on that machine may send the message to a collector.  No
   acknowledgement of the receipt is made.

   One of the fundamental tenets of the syslog protocol and process is
   its simplicity.  No stringent coordination is required between the
   transmitters and the receivers.  Indeed, the transmission of syslog
   messages may be started on a device without a receiver being
   configured, or even actually physically present.  Conversely, many
   devices will most likely be able to receive messages without explicit
   configuration or definitions.  This simplicity has greatly aided the
   acceptance and deployment of syslog.

   We are using definitions of syslog protocol from [RFC3164] in this
   draft.


Wildes, et al.      Expires December 14, 2014               [Page 2]

Internet-Draft               SYSLOG YANG model             June 2014


1.1.  Definitions and Acronyms

TBD

2.  Problem Statement

   This document defines a YANG [RFC6020] configuration data model for 
   the Syslog protocol. YANG models can be used with network management 
   agents such as NETCONF [RFC6241] to install, manipulate, and delete 
   the configuration of network devices.

   This module makes use of the YANG â€œfeature" construct which allows 
   implementations to support only those Syslog features that lie
   within their capabilities.

3.  Design of the SYSLOG Model

   The syslog model was designed by comparing various syslog features 
   implemented by various vendors' in different implementations.

   This draft addresses the common leafs between all vendors and creates
   a common model, which can be augmented with proprietary features, if 
   necessary. The base model is designed to be very simple for maximum 
   flexibility.

   Syslog consists of message producers, a group level suppression filter, 
   and message distributors. The following digram shows syslog messages 
   flowing from a message producer, through the group level suppression 
   filter, and if passed by the group filter to message distributors where 
   further suppression filtering can take place.

   Message Producers  
    +-------------+  +-------------+  +-------------+  +-------------+
    |  Various    |  |     OS      |  |             |  |   Remote    |
    | Components  |  |   Kernel    |  | Line Cards  |  |   Servers   |
    +-------------+  +-------------+  +-------------+  +-------------+  

    +-------------+  +-------------+  +-------------+  +-------------+
    |    SNMP     |  |  Interface  |  |   Standby   |  |   Syslog    |
    |   Events    |  |   Events    |  |  Supervisor |  |   Itself    |
    +-------------+  +-------------+  +-------------+  +-------------+

    |                                                                |
    +----------------------------------------------------------------+
                 |
                 |
                 v
    
   Group Level Suppression
    +------------------------------+
    | Filter by message facility   |
    | and message severity         |
    +------------------------------+
                 |
                 |
                 |
           +-----+---------+----------------+-----------------+
           |               |                |                 |
           v               v                v                 v
 
   Message Distributors
    +-------------+  +-------------+  +-------------+  +-------------+
    |             |  |             |  |    User     |  |   Remote    |
    |   Console   |  | Log File(s) |  |  Terminals  |  |   Servers   |
    +-------------+  +-------------+  +-------------+  +-------------+

   The leaves in the base syslog model correspond to the group level 
   suppression filter and each message distributor:
     - console
     - log file(s)
     - user terminals
     - remote server(s).

   Optional features are used to specified fields that are not present in 
   all vendor configurations.


Wildes, et al.      Expires December 14, 2014               [Page 3]

Internet-Draft               SYSLOG YANG model             June 2014


3.1.  SYSLOG Module


module: syslog
   +--rw syslog-cfg
      +--rw global-logging
      |  +--rw logging-severities [facility]
      |     +--rw facility    identityref
      |     +--rw severity?   syslogtypes:Severity
      +--rw console-logging
      |  +--rw (logging-level-scope)?
      |     +--:(all-facilities)
      |     |  +--rw logging-severity?     syslogtypes:Severity
      |     +--:(facility)
      |        +--rw logging-severities [facility]
      |           +--rw facility    identityref
      |           +--rw severity?   syslogtypes:Severity
      +--rw file-logging
      |  +--rw file-name             string
      |  +--rw file-size?            uint32
      |  +--rw (logging-scope)?
      |     +--:(all-facilities)
      |     |  +--rw logging-severity?     syslogtypes:Severity
      |     +--:(facility)
      |        +--rw logging-severities [facility]
      |           +--rw facility    identityref
      |           +--rw severity?   syslogtypes:Severity
      +--rw remote-logging
      |  +--rw remote-logging-destination [destination]
      |     +--rw destination           string
      |     +--rw logging-severities [facility]
      |     |  +--rw facility    identityref
      |     |  +--rw severity?   syslogtypes:Severity
      |     +--rw source-interface?     string
      |     +--rw vrf-name?             string
      +--rw terminal-logging
         +--rw (user-scope)?
            +--:(all-users)
            |  +--rw all-users
            |     +--rw (logging-scope)?
            |        +--:(all-facilities)
            |        |  +--rw logging-severity?     syslogtypes:Severity
            |        +--:(facility)
            |           +--rw logging-severities [facility]
            |              +--rw facility    identityref
            |              +--rw severity?   syslogtypes:Severity
            +--:(per-user)
               +--rw user-name [uname]
                  +--rw uname                 string
                  +--rw (logging-scope)?
                     +--:(all-facilities)
                     |  +--rw logging-severity?     syslogtypes:Severity
                     +--:(facility)
                        +--rw logging-severities [facility]
                           +--rw facility    identityref
                           +--rw severity?   syslogtypes:Severity

Wildes, et al.      Expires December 14, 2014               [Page 4]

Internet-Draft               SYSLOG YANG model             June 2014


4.  SYSLOG YANG Models

4.1.  SYSLOG module

module syslog {
  namespace "urn:ietf:params:xml:ns:yang:syslog";
  prefix syslog;
  import syslog-types {
    prefix syslogtypes;
  }

  organization "IETF NETMOD (NETCONF Data Modeling Language) Working Group";
  contact
    "WG Web:   <http://tools.ietf.org/wg/netmod/>
     WG List:  <mailto:netmod@ietf.org>

     WG Chair: Juergen Schoenwaelder
               <mailto:j.schoenwaelder@jacobs-university.de>
     
     WG Chair: Tom Nadeau
               <mailto:tnadeau@brocade.com>
     
     Editor:   Clyde Wildes
               <mailto:cwildes@cisco.com>

     Editor:   Agrahara Kiran Koushik
               <mailto:kkoushik@brocade.com>";
  description
    "This module contains a collection of YANG definitions 
     for syslog configuration.";

  revision 2014-06-10 {
    description
      "Initial revision.";
  }

  feature global-logging {
    description
      "This feature represents the ability to adjust 
       log message severity per logging facility on the global level.";
  }

  feature console-facility-logging-config {
    description
      "This feature represents the ability to adjust 
       log message severity per logging facility for console logging.";
  }

  feature file-logging {
    description
      "This feature represents the ability to log 
       messages into a file.";
  }

Wildes, et al.      Expires December 14, 2014               [Page 5]

Internet-Draft               SYSLOG YANG model             June 2014

  feature file-logging-size-config {
    description
      "This feature represents the ability to specify 
       the size of the log file.";
  }

  feature file-facility-logging-config {
    description
      "This feature represents the ability to adjust 
       log message severity per logging facility for file logging.";
  }

  feature terminal-facility-logging-config {
    description
      "This feature represents the ability to adjust 
       log message severity per logging facility for terminal logging.";
  }

  feature terminal-facility-user-logging-config {
    description
      "This feature represents the ability to adjust 
       log message settings for individual terminal users.";
  }

  feature use-vrf {
    description
      "This feature allows logging of messages to a particular VRF.";
  }

  grouping FACILITY-LOGGING {
    list logging-severities {
      key "facility";
      leaf facility {
        type identityref {
          base syslogtypes:syslog-facility;
        }
        description
          "The logging facility to be configured.";
      }
      leaf severity {
        type syslogtypes:Severity;
        description
          "The logging severity to be configured.";
      }
    }
  }

Wildes, et al.      Expires December 14, 2014               [Page 6]

Internet-Draft               SYSLOG YANG model             June 2014

  container syslog-cfg {
    description
      "syslog";
    config true;
    container global-logging {
      if-feature global-logging;
      description
        "Global logging configuration.";
      uses FACILITY-LOGGING;
    }
    container console-logging {
      description
        "Console logging configuration.";
      choice logging-level-scope {
        case all-facilities {
          leaf logging-severity {
            type syslogtypes:Severity;
          }
        }
        case facility {
          if-feature console-facility-logging-config;
          uses FACILITY-LOGGING;
        }
      }
    }
    container file-logging {
      if-feature file-logging;
      description
        "File logging configuration.";
      leaf file-name {
        mandatory true;
        type string;
        description
          "File Logging Level";
      }
      leaf file-size {
        if-feature file-logging-size-config;
        type uint32;
        description
          "Logging file size";
      }
      choice logging-scope {
        case all-facilities {
          leaf logging-severity {
            type syslogtypes:Severity;
          }
        }
        case facility {
          if-feature file-facility-logging-config;
          uses FACILITY-LOGGING;
        }
      }
    }
    container remote-logging {
      description
        "Remote logging configuration.";
      list remote-logging-destination {
        key "destination";
        leaf destination {
          type string;
          description
            "The value of Id should be set to either ipv4, ipv6 or the host name used to identify
             the logging destination";
        }
        uses FACILITY-LOGGING;
        leaf source-interface {
          description
            "Sets source interface for the remote syslog server. Can be interface name or interface IP address.";
          type string;
        }
        leaf vrf-name {
          if-feature use-vrf;
          type string;
          description
            "Name of the VRF";
        }
      }
    }

Wildes, et al.      Expires December 14, 2014               [Page 7]

Internet-Draft               SYSLOG YANG model             June 2014

    container terminal-logging {
      description
        "Terminal logging configuration.";
      choice user-scope {
        case all-users {
          container all-users {
            choice logging-scope {
              case all-facilities {
                leaf logging-severity {
                  type syslogtypes:Severity;
                }
              }
              case facility {
                if-feature terminal-facility-logging-config;
                uses FACILITY-LOGGING;
              }
            }
          }
        }
        case per-user {
          if-feature terminal-facility-user-logging-config;
          list user-name {
            key "uname";
            leaf uname {
              type string;
            }
            choice logging-scope {
              case all-facilities {
                leaf logging-severity {
                  type syslogtypes:Severity;
                }
              }
              case facility {
                if-feature terminal-facility-logging-config;
                uses FACILITY-LOGGING;
              }
            }
          }
        }
      }
    }
  }
}


Wildes, et al.      Expires December 14, 2014               [Page 8]

Internet-Draft               SYSLOG YANG model             June 2014


4.2.  A SYSLOG Example

   Requirement:
   Enable global logging of two facilities:
     kern - severity critical(1)
     auth - severity error(3)

   Enable console logging of syslogs of severity
   critical(1)
   
   Here is the example syslog configuration xml:

   <rpc message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
     <edit-config>
       <target>
         <running/>
       </target>
       <config>
         <syslog-cfg xmlns="urn:cisco:params:xml:ns:yang:syslog">
           <global-logging>
             <facility>syslogtypes:kern</facility>
             <severity>syslogtypes:critical</severity>
             <facility>syslogtypes:auth</facility>
             <severity>syslogtypes:error</severity>
           </global-logging>
           <console-logging>
             <logging-severity>syslogtypes:critical</logging-severity>
           </console-logging>
         </syslog-cfg>
       </config>
     </edit-config>
   </rpc>

   <?xml version="1.0" encoding="UTF-8"?>
   <rpc-reply message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
     <ok/>
   </rpc-reply>



Wildes, et al.      Expires December 14, 2014              [Page 9]

Internet-Draft               SYSLOG YANG model             June 2014


5.  Security Considerations

   The YANG module defined in this memo is designed to be accessed via
   the NETCONF protocol [RFC6241] [RFC6241].  The lowest NETCONF layer
   is the secure transport layer and the mandatory-to-implement secure
   transport is SSH [RFC6242] [RFC6242].  The NETCONF access control
   model [RFC6536] [RFC6536] provides the means to restrict access for
   particular NETCONF users to a pre-configured subset of all available
   NETCONF protocol operations and content.

   There are a number of data nodes defined in the YANG module which are
   writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., <edit-config>)
   to these data nodes without proper protection can have a negative
   effect on network operations.

   TBD: List specific Subtrees and data nodes and their sensitivity/
   vulnerability.


Wildes, et al.      Expires December 14, 2014              [Page 10]

Internet-Draft               SYSLOG YANG model             June 2014


6.  IANA Considerations

   This document registers a URI in the IETF XML registry [RFC3688]
   [RFC3688].  Following the format in RFC 3688, the following
   registration is requested to be made:

   URI: urn:ietf:params:xml:ns:yang:syslog

   Registrant Contact: The IESG.

   XML: N/A, the requested URI is an XML namespace.

   This document registers a YANG module in the YANG Module Names
   registry [RFC6020].

   name: syslog namespace: urn:ietf:params:xml:ns:yang:syslog
   prefix: syslog reference: RFC XXXX

7.  Acknowledgements

8.  Change log [RFC Editor: Please remove]

9.  References

   [RFC3164]  Lonvick, C., "The BSD syslog Protocol", BCP 81, RFC 3164,
              August 2001.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              January 2004.

   [RFC6020]  Bjorklund, M., "YANG - A Data Modeling Language for the
              Network Configuration Protocol (NETCONF)", RFC 6020,
              October 2010.

   [RFC6241]  Enns, R., Bjorklund, M., Schoenwaelder, J., and A.
              Bierman, "Network Configuration Protocol (NETCONF)", RFC
              6241, June 2011.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, June 2011.



Wildes, et al.      Expires December 14, 2014              [Page 11]

Internet-Draft               SYSLOG YANG model             June 2014


   [RFC6536]  Bierman, A. and M. Bjorklund, "Network Configuration
              Protocol (NETCONF) Access Control Model", RFC 6536, March
              2012.

Authors' Addresses

   Clyde Wildes
   Cisco Systems Inc.

   Email: cwildes@cisco.com


   Kiran Agrahara Sreenivasa
   Brocade Communications Systems

   Email: kkoushik@brocade.com

















Wildes, et al.      Expires December 14, 2014              [Page 12]
